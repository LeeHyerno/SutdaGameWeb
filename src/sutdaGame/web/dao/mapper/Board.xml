<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="sutdaGame.web.dao.BoardDAO" >
	
	<insert id="insertBoard" parameterType="BoardVO">
		INSERT INTO sutda_board (title, content, writer_no,kind_no)
		VALUES (#{title}, #{content}, #{writerNo}, #{kind_no});
	</insert>
	
	<update id="updateBoard" parameterType="BoardVO">
		UPDATE sutda_board
		SET title=#{title}, content=#{content}, write_date=now()
		WHERE no=#{no}
	</update>
	
	<select id="selectBoardList" resultType="BoardVO" parameterType="int">
		SELECT b.no,
		title,
		content,
		IFNULL(o.name,"탈퇴한 사용자") as writerName,
		write_date as writeDate,
		FROM sutda_board b
		LEFT JOIN player o
		ON b.writer_no = o.no
		WHERE kind_no=#{kindNo}
	</select>
	
	<select id="selectOneBoard" parameterType="int" resultType="BoardVO">
		SELECT b.no,
		title,
		content,
		IFNULL(o.name,"탈퇴한 사용자") as writerName,
		write_date as writeDate
		FROM sutda_board b
		LEFT JOIN player o
		ON b.writer_no = o.no
		WHERE b.no=#{no}
	</select>
	
	<delete id="deleteBoard" parameterType="int">
		DELETE FROM sutda_board
		WHERE no=#{no}
	</delete>

	
<!--
CREATE TABLE sutda_board
(
    `no`          INT            NOT NULL    AUTO_INCREMENT COMMENT '번호',
    `title`       VARCHAR(45)    NOT NULL    COMMENT '제목',
    `content`     VARCHAR(45)    NOT NULL    COMMENT '내용',
    `writer_no`   VARCHAR(45)    NOT NULL    COMMENT '작성자 번호',
    `write_date`  TIMESTAMP      NOT NULL    DEFAULT CURRENT_TIMESTAMP COMMENT '작성일',
    `secret`      TINYINT        NOT NULL    DEFAULT 0 COMMENT '비밀글 여부',
    PRIMARY KEY (no)
);-->

</mapper>